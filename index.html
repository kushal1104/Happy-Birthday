<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Nikky | A Digital Journey</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÇ</text></svg>">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        :root {
            --primary: #8a2be2;
            --secondary: #00bfff;
            --accent: #ff69b4;
            --dark: #0a0a14;
            --darker: #05050a;
            --light: #f8f8ff;
            --gray: #a0a0c0;
            --success: #20b2aa;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--darker);
            color: var(--light);
            cursor: none;
        }

        /* Cursor Effects */
        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--secondary), transparent 70%);
            pointer-events: none;
            z-index: 10000;
            transition: transform 0.1s ease;
            mix-blend-mode: screen;
        }

        .cursor-follower {
            position: fixed;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(var(--secondary-rgb), 0.3);
            pointer-events: none;
            z-index: 9999;
            transition: all 0.3s ease;
        }

        /* Particle System */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: var(--secondary);
            border-radius: 50%;
            opacity: 0;
        }

        /* Sections */
        .section {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 2rem;
            text-align: center;
            z-index: 10;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .section.active {
            display: flex;
            opacity: 1;
        }

        /* Typography */
        h1, h2, h3, h4 {
            font-weight: 300;
            margin-bottom: 1.5rem;
            line-height: 1.3;
        }

        h1 {
            font-size: 3.5rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 2rem;
        }

        h2 {
            font-size: 2.5rem;
            color: var(--light);
        }

        h3 {
            font-size: 1.8rem;
            color: var(--gray);
        }

        p {
            font-size: 1.3rem;
            line-height: 1.7;
            max-width: 800px;
            margin-bottom: 1.5rem;
            color: var(--light);
        }

        .highlight {
            color: var(--secondary);
            font-weight: 600;
        }

        .emphasis {
            color: var(--accent);
            font-style: italic;
        }
        .res-btn{
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 100;
        }
        /* Interactive Elements */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            z-index: 100;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn:hover::after {
            opacity: 1;
        }

        /* Music Player */
        .music-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .music-btn:hover {
            transform: scale(1.1);
        }

        .music-btn i {
            font-size: 1.5rem;
            color: white;
        }

        /* Glitch Effect */
        .glitch {
            position: relative;
            display: inline-block;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            left: 2px;
            text-shadow: -2px 0 var(--primary);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: -2px 0 var(--secondary);
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim {
            0% { clip: rect(42px, 9999px, 64px, 0); }
            5% { clip: rect(12px, 9999px, 85px, 0); }
            10% { clip: rect(25px, 9999px, 67px, 0); }
            15% { clip: rect(82px, 9999px, 89px, 0); }
            20% { clip: rect(53px, 9999px, 74px, 0); }
            25% { clip: rect(64px, 9999px, 52px, 0); }
            30% { clip: rect(32px, 9999px, 95px, 0); }
            35% { clip: rect(72px, 9999px, 58px, 0); }
            40% { clip: rect(28px, 9999px, 99px, 0); }
            45% { clip: rect(65px, 9999px, 41px, 0); }
            50% { clip: rect(51px, 9999px, 87px, 0); }
            55% { clip: rect(19px, 9999px, 65px, 0); }
            60% { clip: rect(77px, 9999px, 39px, 0); }
            65% { clip: rect(15px, 9999px, 93px, 0); }
            70% { clip: rect(46px, 9999px, 81px, 0); }
            75% { clip: rect(23px, 9999px, 59px, 0); }
            80% { clip: rect(68px, 9999px, 47px, 0); }
            85% { clip: rect(36px, 9999px, 72px, 0); }
            90% { clip: rect(59px, 9999px, 88px, 0); }
            95% { clip: rect(11px, 9999px, 91px, 0); }
            100% { clip: rect(83px, 9999px, 26px, 0); }
        }

        @keyframes glitch-anim2 {
            0% { clip: rect(65px, 9999px, 100px, 0); }
            5% { clip: rect(52px, 9999px, 74px, 0); }
            10% { clip: rect(79px, 9999px, 85px, 0); }
            15% { clip: rect(25px, 9999px, 110px, 0); }
            20% { clip: rect(39px, 9999px, 92px, 0); }
            25% { clip: rect(88px, 9999px, 120px, 0); }
            30% { clip: rect(45px, 9999px, 98px, 0); }
            35% { clip: rect(12px, 9999px, 65px, 0); }
            40% { clip: rect(68px, 9999px, 109px, 0); }
            45% { clip: rect(32px, 9999px, 80px, 0); }
            50% { clip: rect(91px, 9999px, 103px, 0); }
            55% { clip: rect(27px, 9999px, 115px, 0); }
            60% { clip: rect(54px, 9999px, 92px, 0); }
            65% { clip: rect(19px, 9999px, 78px, 0); }
            70% { clip: rect(73px, 9999px, 107px, 0); }
            75% { clip: rect(41px, 9999px, 89px, 0); }
            80% { clip: rect(60px, 9999px, 120px, 0); }
            85% { clip: rect(33px, 9999px, 85px, 0); }
            90% { clip: rect(77px, 9999px, 110px, 0); }
            95% { clip: rect(22px, 9999px, 95px, 0); }
            100% { clip: rect(85px, 9999px, 118px, 0); }
        }

        /* Typing Effect */
        .typewriter {
            overflow: hidden;
            border-right: 3px solid var(--secondary);
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--secondary) }
        }

        /* Memory Cards */
        .memory-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            max-width: 1200px;
            margin-top: 2rem;
        }

        .memory-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            width: 300px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: all 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .memory-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--secondary);
        }

        .memory-card h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .memory-card p {
            font-size: 1.1rem;
            color: var(--gray);
        }

        /* Celebration Effects */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background-color: var(--secondary);
            top: -10px;
            z-index: 9999;
        }

        .explosion {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9998;
        }

        /* Progress Indicator */
        .progress {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background-color: var(--secondary);
            transform: scale(1.3);
        }

        /* Special Elements */
        .date-display {
            font-size: 2rem;
            color: var(--secondary);
            font-weight: 300;
            margin: 2rem 0;
            padding: 1rem 2rem;
            border: 1px solid rgba(0, 191, 255, 0.3);
            border-radius: 10px;
            background: rgba(0, 191, 255, 0.05);
        }

        .sorry-container {
            max-width: 800px;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin: 2rem 0;
            border-left: 5px solid var(--accent);
        }

        .sorry-text {
            font-size: 2rem;
            font-weight: 300;
            line-height: 1.4;
            color: var(--light);
        }

        .exam-motivation {
            background: rgba(32, 178, 170, 0.1);
            border-radius: 15px;
            padding: 2.5rem;
            max-width: 900px;
            margin: 2rem 0;
            border: 1px solid rgba(32, 178, 170, 0.3);
        }

        .emoji {
            font-size: 3rem;
            margin: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            h3 { font-size: 1.5rem; }
            p { font-size: 1.1rem; }
            .memory-card { width: 100%; max-width: 400px; }
            .section { padding: 1rem; }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Particle System -->
    <div class="particles" id="particles"></div>

    <!-- Progress Indicator -->
    <div class="progress" id="progress">
        <div class="progress-dot active" data-section="0"></div>
        <div class="progress-dot" data-section="1"></div>
        <div class="progress-dot" data-section="2"></div>
        <div class="progress-dot" data-section="3"></div>
        <div class="progress-dot" data-section="4"></div>
        <div class="progress-dot" data-section="5"></div>
        <div class="progress-dot" data-section="6"></div>
        <div class="progress-dot" data-section="7"></div>
    </div>

    <!-- Music Player -->
    <div class="music-btn" id="musicBtn">
        <i id="musicIcon">üéµ</i>
    </div>

    <!-- Sections -->
    <!-- Section 0: Headphone Suggestion -->
    <div class="section active" id="section0">
        <div class="emoji">üéß</div>
        <h1 class="typewriter">For Your Ears Only</h1>
        <p>Put on your headphones for the best experience.</p>
        <p class="highlight">This journey is crafted with moments that sound better with audio.</p>
        <button class="btn" id="startBtn">Begin the Journey</button>
        <p class="emphasis" style="margin-top: 2rem;">For Nikky - 6th January</p>
    </div>

    <!-- Section 1: First Memory -->
    <div class="section" id="section1">
        <h2 class="glitch" data-text="A Random Encounter">A Random Encounter</h2>
        <div class="date-display">17 June 2023</div>
        <p>Sometimes the most meaningful connections begin in the most unexpected places.</p>
        <p>A random Snapchat message on a regular day turned into <span class="highlight">2+ years of friendship</span>.</p>
        <p>What started as casual chats became endless late-night conversations, calls, and video calls.</p>
        <div class="memory-container">
            <div class="memory-card">
                <h4>First Chat</h4>
                <p>"Hey, I think we have a mutual friend..."</p>
                <p>The beginning of something special.</p>
            </div>
            <div class="memory-card">
                <h4>Late Nights</h4>
                <p>Countless nights talking about everything and nothing at all.</p>
                <p>From silly jokes to deep life talks.</p>
            </div>
            <div class="memory-card">
                <h4>Virtual Presence</h4>
                <p>Video calls that made distance feel smaller.</p>
                <p>Sharing moments despite the miles between us.</p>
            </div>
        </div>
        <button class="btn" id="nextBtn1">Continue the Journey</button>
    </div>

    <!-- Section 2: Friendship Journey -->
    <div class="section" id="section2">
        <h2>More Than Time Zones</h2>
        <p>Even though we've never met in person, our friendship transcended physical distance.</p>
        <p>You were <span class="highlight">my first female friend</span> I could truly talk to about anything.</p>
        
        <div class="memory-container">
            <div class="memory-card">
                <h4>2+ Years</h4>
                <p>730+ days of friendship</p>
                <p>Countless memories created digitally</p>
            </div>
            <div class="memory-card">
                <h4>The Almost Meeting</h4>
                <p>You came to my city once</p>
                <p>But exams kept me from meeting you</p>
                <p class="emphasis" style="margin-top: 1rem;">A missed chance, but not the end</p>
            </div>
            <div class="memory-card">
                <h4>Digital Bond</h4>
                <p>Proof that connection isn't limited by geography</p>
                <p>A friendship built on trust, laughs, and genuine care</p>
            </div>
        </div>
        
        <p style="margin-top: 2rem;">Through all this time, you've shown me what true friendship looks like.</p>
        <button class="btn" id="nextBtn2">Keep Going</button>
    </div>

    <!-- Section 3: Emotional Pause -->
    <div class="section" id="section3">
        <h2>A Moment of Reflection</h2>
        <p>Friendships aren't just about the good times.</p>
        <p>They're also about understanding, patience, and growth.</p>
        
        <div class="sorry-container">
            <p class="sorry-text">For every time I fell short as a friend, I'm truly sorry.</p>
        </div>
        
        <p>This journey taught me that real friendship means showing up, even when it's hard.</p>
        <p>And you've always been there, despite the distance and circumstances.</p>
        
        <div class="emoji">‚ú®</div>
        
        <button class="btn" id="nextBtn3">Proceed</button>
    </div>

    <!-- Section 4: Exam Motivation -->
    <div class="section" id="section4">
        <h2>Your Time to Shine</h2>
        <div class="exam-motivation">
            <h3>12th Science Board Exams üéØ</h3>
            <p>This is your moment, Nikky. All those late nights studying will pay off.</p>
            <p>Remember: You're more capable than you think.</p>
            <p>You've got this. Every formula memorized, every concept understood.</p>
            <p>Walk into that exam hall with the confidence of someone who's prepared.</p>
            <p>And walk out knowing you gave it your all.</p>
            <div style="margin-top: 2rem;">
                <span class="emoji">üìö</span>
                <span class="emoji">‚úèÔ∏è</span>
                <span class="emoji">üéØ</span>
                <span class="emoji">üåü</span>
            </div>
        </div>
        <p style="margin-top: 2rem;">I believe in you. Now go show those exams who's boss!</p>
        <button class="btn" id="nextBtn4">Continue</button>
    </div>

    <!-- Section 5: Fake Ending -->
    <div class="section" id="section5">
        <h2>The Journey Ends Here</h2>
        <p>Or does it?</p>
        <p>This digital experience was my way of celebrating you, Nikky.</p>
        <p>To show that even friends can create unforgettable moments.</p>
        <p>Even boyfriends don't make this kind of surprise...</p>
        <p class="highlight" style="font-size: 1.8rem;">A friend did.</p>
        <p style="margin-top: 2rem;">But wait... there's one more thing.</p>
        <button class="btn" id="nextBtn5">One Last Click</button>
    </div>

    <!-- Section 6: Final Celebration -->
    <div class="section" id="section6">
        <h1 style="font-size: 4rem;">HAPPY BIRTHDAY NIKKY!</h1>
        <div style="font-size: 3rem; margin: 1.5rem 0;">
            <span class="emoji">üéÇ</span>
            <span class="emoji">üéâ</span>
            <span class="emoji">üéä</span>
            <span class="emoji">‚ú®</span>
            <span class="emoji">üéà</span>
            <span class="emoji">üßÅ</span>
            <span class="emoji">üåü</span>
        </div>
        <p>May your 6th January be as special as you are!</p>
        <p>Here's to more late-night calls, more inside jokes, and more years of friendship.</p>
        <p>May this year bring you success in your exams and joy in everything you do.</p>
        
        <div class="memory-container" style="margin-top: 2rem;">
            <div class="memory-card">
                <h4>To Nikky</h4>
                <p>A friend like no other</p>
                <p>A presence that brightens days</p>
                <p>A bond that distance can't break</p>
            </div>
        </div>
        
        <p style="margin-top: 2rem; font-size: 1.5rem;">Thank you for being my friend. üéÇ</p>
        <button class="res-btn" id="restartBtn" style="justify-content: center; text-align:center">Relive the Journey</button>
    </div>

    <!-- Audio Element -->
    <audio id="backgroundMusic" loop>
        <!-- We'll generate audio with JavaScript to avoid external files -->
    </audio>

    <script>
        // Main Application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize variables
            const sections = document.querySelectorAll('.section');
            const progressDots = document.querySelectorAll('.progress-dot');
            const cursor = document.querySelector('.cursor');
            const cursorFollower = document.querySelector('.cursor-follower');
            const particlesContainer = document.getElementById('particles');
            const musicBtn = document.getElementById('musicBtn');
            const musicIcon = document.getElementById('musicIcon');
            const backgroundMusic = document.getElementById('backgroundMusic');
            const startBtn = document.getElementById('startBtn');
            const restartBtn = document.getElementById('restartBtn');
            
            let currentSection = 0;
            let isMusicPlaying = false;
            let particles = [];
            let confettiActive = false;
            
            // Create audio context and generate birthday tune
            function createBirthdayTune() {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const sampleRate = audioContext.sampleRate;
                    const duration = 15; // seconds
                    const numSamples = duration * sampleRate;
                    
                    // Create buffer
                    const buffer = audioContext.createBuffer(1, numSamples, sampleRate);
                    const data = buffer.getChannelData(0);
                    
                    // "Happy Birthday" melody frequencies (simplified)
                    const melody = [
                        392, 392, 440, 392, 523, 494,
                        392, 392, 440, 392, 587, 523,
                        392, 392, 784, 659, 523, 494, 440,
                        698, 698, 659, 523, 587, 523
                    ];
                    
                    let time = 0;
                    let noteIndex = 0;
                    let noteDuration = 0.3; // seconds per note
                    let samplesPerNote = noteDuration * sampleRate;
                    
                    for (let i = 0; i < numSamples; i++) {
                        // Move to next note
                        if (i % samplesPerNote === 0) {
                            noteIndex = Math.floor(i / samplesPerNote) % melody.length;
                        }
                        
                        // Generate sine wave for current note
                        const frequency = melody[noteIndex];
                        data[i] = Math.sin(2 * Math.PI * frequency * time) * 0.2;
                        
                        // Apply envelope to avoid clicks
                        const noteProgress = (i % samplesPerNote) / samplesPerNote;
                        const envelope = Math.min(noteProgress * 10, 1) * Math.max(0, 1 - (noteProgress - 0.7) * 3);
                        data[i] *= envelope;
                        
                        time += 1 / sampleRate;
                    }
                    
                    // Create audio source
                    const source = audioContext.createBufferSource();
                    source.buffer = buffer;
                    source.connect(audioContext.destination);
                    
                    // Create media element source for backgroundMusic
                    const offlineContext = new OfflineAudioContext(1, numSamples, sampleRate);
                    const offlineSource = offlineContext.createBufferSource();
                    offlineSource.buffer = buffer;
                    offlineSource.connect(offlineContext.destination);
                    offlineSource.start();
                    
                    offlineContext.startRendering().then(renderedBuffer => {
                        const blob = new Blob([bufferToWav(renderedBuffer)], { type: 'audio/wav' });
                        const url = URL.createObjectURL(blob);
                        backgroundMusic.src = url;
                    });
                    
                } catch (e) {
                    console.log("Audio generation failed, continuing without sound");
                }
            }
            
            // Convert buffer to WAV
            function bufferToWav(buffer) {
                const numChannels = buffer.numberOfChannels;
                const sampleRate = buffer.sampleRate;
                const length = buffer.length * numChannels * 2;
                const bufferArray = new ArrayBuffer(44 + length);
                const view = new DataView(bufferArray);
                
                // Write WAV header
                writeString(view, 0, 'RIFF');
                view.setUint32(4, 36 + length, true);
                writeString(view, 8, 'WAVE');
                writeString(view, 12, 'fmt ');
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                view.setUint16(22, numChannels, true);
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, sampleRate * numChannels * 2, true);
                view.setUint16(32, numChannels * 2, true);
                view.setUint16(34, 16, true);
                writeString(view, 36, 'data');
                view.setUint32(40, length, true);
                
                // Write audio data
                const channelData = [];
                for (let i = 0; i < numChannels; i++) {
                    channelData.push(buffer.getChannelData(i));
                }
                
                let offset = 44;
                for (let i = 0; i < buffer.length; i++) {
                    for (let channel = 0; channel < numChannels; channel++) {
                        const sample = Math.max(-1, Math.min(1, channelData[channel][i]));
                        view.setInt16(offset, sample * 0x7FFF, true);
                        offset += 2;
                    }
                }
                
                return bufferArray;
            }
            
            function writeString(view, offset, string) {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            }
            
            // Initialize audio
            createBirthdayTune();
            
            // Cursor Effects
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                
                setTimeout(() => {
                    cursorFollower.style.left = e.clientX + 'px';
                    cursorFollower.style.top = e.clientY + 'px';
                }, 100);
                
                // Create particles on mouse move (with throttle)
                if (Math.random() > 0.7) {
                    createParticle(e.clientX, e.clientY);
                }
            });
            
            // Click effects
            document.addEventListener('click', (e) => {
                // Ripple effect
                const ripple = document.createElement('div');
                ripple.classList.add('explosion');
                ripple.style.left = e.clientX + 'px';
                ripple.style.top = e.clientY + 'px';
                ripple.style.backgroundColor = getRandomColor();
                document.body.appendChild(ripple);
                
                // Animate ripple
                ripple.animate([
                    { transform: 'scale(0)', opacity: 1 },
                    { transform: 'scale(3)', opacity: 0 }
                ], {
                    duration: 600,
                    easing: 'ease-out'
                });
                
                // Remove after animation
                setTimeout(() => {
                    ripple.remove();
                }, 600);
                
                // Cursor click effect
                cursor.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    cursor.style.transform = 'scale(1)';
                }, 100);
            });
            
            // Particle System
            function createParticle(x, y) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.backgroundColor = getRandomColor();
                
                particlesContainer.appendChild(particle);
                particles.push(particle);
                
                // Animate particle
                const angle = Math.random() * Math.PI * 2;
                const speed = 1 + Math.random() * 2;
                const size = 2 + Math.random() * 4;
                
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                let posX = x;
                let posY = y;
                let opacity = 0.8;
                
                const animation = setInterval(() => {
                    posX += Math.cos(angle) * speed;
                    posY += Math.sin(angle) * speed;
                    opacity -= 0.02;
                    
                    particle.style.left = posX + 'px';
                    particle.style.top = posY + 'px';
                    particle.style.opacity = opacity;
                    
                    if (opacity <= 0) {
                        clearInterval(animation);
                        particle.remove();
                        particles = particles.filter(p => p !== particle);
                    }
                }, 30);
            }
            
            // Create initial particles
            function createInitialParticles() {
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const x = Math.random() * window.innerWidth;
                        const y = Math.random() * window.innerHeight;
                        createParticle(x, y);
                    }, i * 100);
                }
            }
            
            // Get random color from theme
            function getRandomColor() {
                const colors = ['#8a2be2', '#00bfff', '#ff69b4', '#20b2aa', '#9370db'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // Section Navigation
            function goToSection(index) {
                // Validate index
                if (index < 0 || index >= sections.length) return;
                
                // Hide current section
                sections[currentSection].classList.remove('active');
                progressDots[currentSection].classList.remove('active');
                
                // Update current section
                currentSection = index;
                
                // Show new section
                sections[currentSection].classList.add('active');
                progressDots[currentSection].classList.add('active');
                
                // Special effects for certain sections
                if (index === 6) {
                    startConfetti();
                    if (!isMusicPlaying) {
                        toggleMusic();
                    }
                }
                
                // Update URL hash
                window.location.hash = `section${index}`;
            }
            
            // Progress dot click handlers
            progressDots.forEach(dot => {
                dot.addEventListener('click', () => {
                    const sectionIndex = parseInt(dot.getAttribute('data-section'));
                    goToSection(sectionIndex);
                });
            });
            
            // Button event listeners
            startBtn.addEventListener('click', () => goToSection(1));
            restartBtn.addEventListener('click', () => goToSection(0));
            
            // Next button handlers
            document.getElementById('nextBtn1')?.addEventListener('click', () => goToSection(2));
            document.getElementById('nextBtn2')?.addEventListener('click', () => goToSection(3));
            document.getElementById('nextBtn3')?.addEventListener('click', () => goToSection(4));
            document.getElementById('nextBtn4')?.addEventListener('click', () => goToSection(5));
            document.getElementById('nextBtn5')?.addEventListener('click', () => goToSection(6));
            
            // Music controls
            function toggleMusic() {
                if (isMusicPlaying) {
                    backgroundMusic.pause();
                    musicIcon.textContent = 'üéµ';
                } else {
                    backgroundMusic.play().catch(e => {
                        console.log("Audio play failed:", e);
                        // If autoplay is blocked, show a message
                        musicBtn.title = "Click to enable audio. Some browsers require user interaction first.";
                    });
                    musicIcon.textContent = 'üîä';
                }
                isMusicPlaying = !isMusicPlaying;
            }
            
            musicBtn.addEventListener('click', toggleMusic);
            
            // Confetti effect for final section
            function startConfetti() {
                if (confettiActive) return;
                confettiActive = true;
                
                const confettiCount = 150;
                const confettiColors = ['#8a2be2', '#00bfff', '#ff69b4', '#20b2aa', '#9370db', '#ffff00', '#00ff00', '#ff4500'];
                
                for (let i = 0; i < confettiCount; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.classList.add('confetti');
                        confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.width = (5 + Math.random() * 10) + 'px';
                        confetti.style.height = (5 + Math.random() * 10) + 'px';
                        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                        
                        document.body.appendChild(confetti);
                        
                        // Animation
                        const animation = confetti.animate([
                            { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                            { transform: `translateY(${window.innerHeight}px) rotate(${360 + Math.random() * 360}deg)`, opacity: 0 }
                        ], {
                            duration: 2000 + Math.random() * 3000,
                            easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                        });
                        
                        // Remove after animation
                        animation.onfinish = () => confetti.remove();
                    }, i * 20);
                }
                
                // Keep adding more confetti every few seconds
                setInterval(() => {
                    if (currentSection === 6) {
                        for (let i = 0; i < 10; i++) {
                            setTimeout(() => {
                                const confetti = document.createElement('div');
                                confetti.classList.add('confetti');
                                confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                                confetti.style.left = Math.random() * 100 + 'vw';
                                confetti.style.width = (5 + Math.random() * 10) + 'px';
                                confetti.style.height = (5 + Math.random() * 10) + 'px';
                                
                                document.body.appendChild(confetti);
                                
                                const animation = confetti.animate([
                                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                                    { transform: `translateY(${window.innerHeight}px) rotate(${360 + Math.random() * 360}deg)`, opacity: 0 }
                                ], {
                                    duration: 2000 + Math.random() * 3000,
                                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                                });
                                
                                animation.onfinish = () => confetti.remove();
                            }, i * 100);
                        }
                    }
                }, 3000);
            }
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') {
                    e.preventDefault();
                    if (currentSection < sections.length - 1) {
                        goToSection(currentSection + 1);
                    }
                } else if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    if (currentSection > 0) {
                        goToSection(currentSection - 1);
                    }
                } else if (e.key === 'm' || e.key === 'M') {
                    toggleMusic();
                }
            });
            
            // Initialize
            createInitialParticles();
            
            // Check for hash in URL
            const hash = window.location.hash;
            if (hash) {
                const match = hash.match(/section(\d)/);
                if (match) {
                    const sectionIndex = parseInt(match[1]);
                    if (!isNaN(sectionIndex)) {
                        goToSection(sectionIndex);
                    }
                }
            }
            
            // Add some glitch effects randomly
            setInterval(() => {
                if (Math.random() > 0.7) {
                    document.body.style.filter = 'hue-rotate(90deg)';
                    setTimeout(() => {
                        document.body.style.filter = 'none';
                    }, 100);
                }
            }, 3000);
        });
    </script>
</body>
</html>